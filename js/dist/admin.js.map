{"version":3,"sources":["webpack://@flagrow/terms/webpack/bootstrap","webpack://@flagrow/terms/./admin.js","webpack://@flagrow/terms/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@flagrow/terms/./node_modules/html5sortable/dist/html.sortable.js","webpack://@flagrow/terms/./src/admin/addPermissions.js","webpack://@flagrow/terms/./src/admin/components/PolicyEdit.js","webpack://@flagrow/terms/./src/admin/components/PolicyList.js","webpack://@flagrow/terms/./src/admin/components/TermsSettingsModal.js","webpack://@flagrow/terms/./src/admin/index.js","webpack://@flagrow/terms/./src/common/helpers/sortByAttribute.js","webpack://@flagrow/terms/./src/common/models/Policy.js","webpack://@flagrow/terms/external \"flarum.core.compat['Component']\"","webpack://@flagrow/terms/external \"flarum.core.compat['Model']\"","webpack://@flagrow/terms/external \"flarum.core.compat['app']\"","webpack://@flagrow/terms/external \"flarum.core.compat['components/Button']\"","webpack://@flagrow/terms/external \"flarum.core.compat['components/PermissionGrid']\"","webpack://@flagrow/terms/external \"flarum.core.compat['components/SettingsModal']\"","webpack://@flagrow/terms/external \"flarum.core.compat['components/Switch']\"","webpack://@flagrow/terms/external \"flarum.core.compat['extend']\"","webpack://@flagrow/terms/external \"flarum.core.compat['helpers/icon']\"","webpack://@flagrow/terms/external \"flarum.core.compat['utils/computed']\"","webpack://@flagrow/terms/external \"flarum.core.compat['utils/mixin']\"","webpack://@flagrow/terms/external \"jQuery\""],"names":["extend","PermissionGrid","prototype","items","add","icon","label","app","translator","trans","permission","PolicyEdit","init","policy","props","dirty","processing","toggleFields","initNewField","store","createRecord","attributes","name","url","update_message","terms_updated_at","boxTitle","exists","view","m","onclick","viewFields","type","value","oninput","withAttr","updateAttribute","bind","placeholder","Button","component","className","moment","milliseconds","toISOString","children","map","format","href","forum","attribute","id","target","toUpperCase","a","loading","disabled","readyToSave","savePolicy","deletePolicy","pushAttributes","createNewRecord","save","data","then","redraw","catch","err","confirm","join","delete","Component","PolicyList","request","method","result","pushPayload","config","$","sortable","handle","on","sorting","get","updateSort","policies","all","fieldsList","sortByAttribute","forEach","push","key","sort","settingsPrefix","translationPrefix","TermsSettingsModal","title","form","bidi","setting","Switch","state","onchange","SettingsModal","initializers","models","Policy","extensionSettings","modal","show","addPermissions","attr","b","apiEndpoint","mixin","Model","form_key","computed"],"mappings":";;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;;AClFA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAe;AACf;AACA;AACA;AACA,C;;;;;;;;;;;ACJA,iGAAC;AACD,MAAM,IAA0C;AAChD,IAAI,iCAAO,CAAC,2CAAQ,CAAC,oCAAE,OAAO;AAAA;AAAA;AAAA,oGAAC;AAC/B,GAAG,MAAM,EAIN;AACH,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;A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","file":"admin.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./admin.js\");\n","export * from './src/common';\nexport * from './src/admin';\n","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}",";(function(root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define(['jquery'], factory);\n  } else if (typeof exports === 'object') {\n    module.exports = factory(require('jquery'));\n  } else {\n    root.sortable = factory(root.jQuery);\n  }\n}(this, function($) {\n/*\n * HTML5 Sortable jQuery Plugin\n * https://github.com/voidberg/html5sortable\n *\n * Original code copyright 2012 Ali Farhadi.\n * This version is mantained by Alexandru Badiu <andu@ctrlz.ro> & Lukas Oppermann <lukas@vea.re>\n *\n *\n * Released under the MIT license.\n */\n'use strict';\n/*\n * variables global to the plugin\n */\nvar dragging;\nvar draggingHeight;\nvar placeholders = $();\nvar sortables = [];\n/*\n * remove event handlers from items\n * @param [jquery Collection] items\n * @info event.h5s (jquery way of namespacing events, to bind multiple handlers to the event)\n */\nvar _removeItemEvents = function(items) {\n  items.off('dragstart.h5s');\n  items.off('dragend.h5s');\n  items.off('selectstart.h5s');\n  items.off('dragover.h5s');\n  items.off('dragenter.h5s');\n  items.off('drop.h5s');\n};\n/*\n * remove event handlers from sortable\n * @param [jquery Collection] sortable\n * @info event.h5s (jquery way of namespacing events, to bind multiple handlers to the event)\n */\nvar _removeSortableEvents = function(sortable) {\n  sortable.off('dragover.h5s');\n  sortable.off('dragenter.h5s');\n  sortable.off('drop.h5s');\n};\n/*\n * attache ghost to dataTransfer object\n * @param [event] original event\n * @param [object] ghost-object with item, x and y coordinates\n */\nvar _attachGhost = function(event, ghost) {\n  // this needs to be set for HTML5 drag & drop to work\n  event.dataTransfer.effectAllowed = 'move';\n  event.dataTransfer.setData('text', '');\n\n  // check if setDragImage method is available\n  if (event.dataTransfer.setDragImage) {\n    event.dataTransfer.setDragImage(ghost.item, ghost.x, ghost.y);\n  }\n};\n/**\n * _addGhostPos clones the dragged item and adds it as a Ghost item\n * @param [object] event - the event fired when dragstart is triggered\n * @param [object] ghost - .item = node, draggedItem = jQuery collection\n */\nvar _addGhostPos = function(e, ghost) {\n  if (!ghost.x) {\n    ghost.x = parseInt(e.pageX - ghost.draggedItem.offset().left);\n  }\n  if (!ghost.y) {\n    ghost.y = parseInt(e.pageY - ghost.draggedItem.offset().top);\n  }\n  return ghost;\n};\n/**\n * _makeGhost decides which way to make a ghost and passes it to attachGhost\n * @param [jQuery selection] $draggedItem - the item that the user drags\n */\nvar _makeGhost = function($draggedItem) {\n  return {\n    item: $draggedItem[0],\n    draggedItem: $draggedItem\n  };\n};\n/**\n * _getGhost constructs ghost and attaches it to dataTransfer\n * @param [event] event - the original drag event object\n * @param [jQuery selection] $draggedItem - the item that the user drags\n * @param [object] ghostOpt - the ghost options\n */\n// TODO: could $draggedItem be replaced by event.target in all instances\nvar _getGhost = function(event, $draggedItem) {\n  // add ghost item & draggedItem to ghost object\n  var ghost = _makeGhost($draggedItem);\n  // attach ghost position\n  ghost = _addGhostPos(event, ghost);\n  // attach ghost to dataTransfer\n  _attachGhost(event, ghost);\n};\n/*\n * return options if not set on sortable already\n * @param [object] soptions\n * @param [object] options\n */\nvar _getOptions = function(soptions, options) {\n  if (typeof soptions === 'undefined') {\n    return options;\n  }\n  return soptions;\n};\n/*\n * remove data from sortable\n * @param [jquery Collection] a single sortable\n */\nvar _removeSortableData = function(sortable) {\n  sortable.removeData('opts');\n  sortable.removeData('connectWith');\n  sortable.removeData('items');\n  sortable.removeAttr('aria-dropeffect');\n};\n/*\n * remove data from items\n * @param [jquery Collection] items\n */\nvar _removeItemData = function(items) {\n  items.removeAttr('aria-grabbed');\n  items.removeAttr('draggable');\n  items.removeAttr('role');\n};\n/*\n * check if two lists are connected\n * @param [jquery Collection] items\n */\nvar _listsConnected = function(curList, destList) {\n  if (curList[0] === destList[0]) {\n    return true;\n  }\n  if (curList.data('connectWith') !== undefined) {\n    return curList.data('connectWith') === destList.data('connectWith');\n  }\n  return false;\n};\n/*\n * destroy the sortable\n * @param [jquery Collection] a single sortable\n */\nvar _destroySortable = function(sortable) {\n  var opts = sortable.data('opts') || {};\n  var items = sortable.children(opts.items);\n  var handles = opts.handle ? items.find(opts.handle) : items;\n  // remove event handlers & data from sortable\n  _removeSortableEvents(sortable);\n  _removeSortableData(sortable);\n  // remove event handlers & data from items\n  handles.off('mousedown.h5s');\n  _removeItemEvents(items);\n  _removeItemData(items);\n};\n/*\n * enable the sortable\n * @param [jquery Collection] a single sortable\n */\nvar _enableSortable = function(sortable) {\n  var opts = sortable.data('opts');\n  var items = sortable.children(opts.items);\n  var handles = opts.handle ? items.find(opts.handle) : items;\n  sortable.attr('aria-dropeffect', 'move');\n  handles.attr('draggable', 'true');\n  // IE FIX for ghost\n  // can be disabled as it has the side effect that other events\n  // (e.g. click) will be ignored\n  if (typeof document.createElement('span').dragDrop === 'function' && !opts.disableIEFix) {\n    handles.on('mousedown.h5s', function() {\n      if (items.index(this) !== -1) {\n        this.dragDrop();\n      } else {\n        $(this).parents(opts.items)[0].dragDrop();\n      }\n    });\n  }\n};\n/*\n * disable the sortable\n * @param [jquery Collection] a single sortable\n */\nvar _disableSortable = function(sortable) {\n  var opts = sortable.data('opts');\n  var items = sortable.children(opts.items);\n  var handles = opts.handle ? items.find(opts.handle) : items;\n  sortable.attr('aria-dropeffect', 'none');\n  handles.attr('draggable', false);\n  handles.off('mousedown.h5s');\n};\n/*\n * reload the sortable\n * @param [jquery Collection] a single sortable\n * @description events need to be removed to not be double bound\n */\nvar _reloadSortable = function(sortable) {\n  var opts = sortable.data('opts');\n  var items = sortable.children(opts.items);\n  var handles = opts.handle ? items.find(opts.handle) : items;\n  // remove event handlers from items\n  _removeItemEvents(items);\n  handles.off('mousedown.h5s');\n  // remove event handlers from sortable\n  _removeSortableEvents(sortable);\n};\n/*\n * public sortable object\n * @param [object|string] options|method\n */\nvar sortable = function(selector, options) {\n\n  var $sortables = $(selector);\n  var method = String(options);\n\n  options = $.extend({\n    connectWith: false,\n    placeholder: null,\n    // dragImage can be null or a jQuery element\n    dragImage: null,\n    disableIEFix: false,\n    placeholderClass: 'sortable-placeholder',\n    draggingClass: 'sortable-dragging'\n  }, options);\n\n  /* TODO: maxstatements should be 25, fix and remove line below */\n  /*jshint maxstatements:false */\n  return $sortables.each(function() {\n\n    var $sortable = $(this);\n\n    if (/enable|disable|destroy/.test(method)) {\n      sortable[method]($sortable);\n      return;\n    }\n\n    // get options & set options on sortable\n    options = _getOptions($sortable.data('opts'), options);\n    $sortable.data('opts', options);\n    // reset sortable\n    _reloadSortable($sortable);\n    // initialize\n    var items = $sortable.children(options.items);\n    var index;\n    var startParent;\n    var newParent;\n    var placeholder = (options.placeholder === null) ? $('<' + (/^ul|ol$/i.test(this.tagName) ? 'li' : 'div') + ' class=\"' + options.placeholderClass + '\"/>') : $(options.placeholder).addClass(options.placeholderClass);\n\n    // setup sortable ids\n    if (!$sortable.attr('data-sortable-id')) {\n      var id = sortables.length;\n      sortables[id] = $sortable;\n      $sortable.attr('data-sortable-id', id);\n      items.attr('data-item-sortable-id', id);\n    }\n\n    $sortable.data('items', options.items);\n    placeholders = placeholders.add(placeholder);\n    if (options.connectWith) {\n      $sortable.data('connectWith', options.connectWith);\n    }\n\n    _enableSortable($sortable);\n    items.attr('role', 'option');\n    items.attr('aria-grabbed', 'false');\n\n    // Handle drag events on draggable items\n    items.on('dragstart.h5s', function(e) {\n      e.stopImmediatePropagation();\n\n      if (options.dragImage) {\n        _attachGhost(e.originalEvent, {\n          item: options.dragImage,\n          x: 0,\n          y: 0\n        });\n        console.log('WARNING: dragImage option is deprecated' +\n        ' and will be removed in the future!');\n      } else {\n        // add transparent clone or other ghost to cursor\n        _getGhost(e.originalEvent, $(this), options.dragImage);\n      }\n      // cache selsection & add attr for dragging\n      dragging = $(this);\n      dragging.addClass(options.draggingClass);\n      dragging.attr('aria-grabbed', 'true');\n      // grab values\n      index = dragging.index();\n      draggingHeight = dragging.height();\n      startParent = $(this).parent();\n      // trigger sortstar update\n      dragging.parent().triggerHandler('sortstart', {\n        item: dragging,\n        startparent: startParent\n      });\n    });\n    // Handle drag events on draggable items\n    items.on('dragend.h5s', function() {\n      if (!dragging) {\n        return;\n      }\n      // remove dragging attributes and show item\n      dragging.removeClass(options.draggingClass);\n      dragging.attr('aria-grabbed', 'false');\n      dragging.show();\n\n      placeholders.detach();\n      newParent = $(this).parent();\n      dragging.parent().triggerHandler('sortstop', {\n        item: dragging,\n        startparent: startParent,\n      });\n      if (index !== dragging.index() ||\n          startParent.get(0) !== newParent.get(0)) {\n        dragging.parent().triggerHandler('sortupdate', {\n          item: dragging,\n          index: newParent.children(newParent.data('items')).index(dragging),\n          oldindex: items.index(dragging),\n          elementIndex: dragging.index(),\n          oldElementIndex: index,\n          startparent: startParent,\n          endparent: newParent\n        });\n      }\n      dragging = null;\n      draggingHeight = null;\n    });\n    // Handle drop event on sortable & placeholder\n    // TODO: REMOVE placeholder?????\n    $(this).add([placeholder]).on('drop.h5s', function(e) {\n      if (!_listsConnected($sortable, $(dragging).parent())) {\n        return;\n      }\n\n      e.stopPropagation();\n      placeholders.filter(':visible').after(dragging);\n      dragging.trigger('dragend.h5s');\n      return false;\n    });\n\n    // Handle dragover and dragenter events on draggable items\n    // TODO: REMOVE placeholder?????\n    items.add([this, placeholder]).on('dragover.h5s dragenter.h5s', function(e) {\n      if (!_listsConnected($sortable, $(dragging).parent())) {\n        return;\n      }\n\n      e.preventDefault();\n      e.originalEvent.dataTransfer.dropEffect = 'move';\n      if (items.is(this)) {\n        var thisHeight = $(this).height();\n        if (options.forcePlaceholderSize) {\n          placeholder.height(draggingHeight);\n        }\n\n        // Check if $(this) is bigger than the draggable. If it is, we have to define a dead zone to prevent flickering\n        if (thisHeight > draggingHeight) {\n          // Dead zone?\n          var deadZone = thisHeight - draggingHeight;\n          var offsetTop = $(this).offset().top;\n          if (placeholder.index() < $(this).index() &&\n              e.originalEvent.pageY < offsetTop + deadZone) {\n            return false;\n          }\n          if (placeholder.index() > $(this).index() &&\n              e.originalEvent.pageY > offsetTop + thisHeight - deadZone) {\n            return false;\n          }\n        }\n\n        dragging.hide();\n        if (placeholder.index() < $(this).index()) {\n          $(this).after(placeholder);\n        } else {\n          $(this).before(placeholder);\n        }\n        placeholders.not(placeholder).detach();\n      } else {\n        if (!placeholders.is(this) && !$(this).children(options.items).length) {\n          placeholders.detach();\n          $(this).append(placeholder);\n        }\n      }\n      return false;\n    });\n  });\n};\n\nsortable.destroy = function(sortable) {\n  _destroySortable(sortable);\n};\n\nsortable.enable = function(sortable) {\n  _enableSortable(sortable);\n};\n\nsortable.disable = function(sortable) {\n  _disableSortable(sortable);\n};\n\n$.fn.sortable = function(options) {\n  return sortable(this, options);\n};\n\nreturn sortable;\n}));\n","import {extend} from 'flarum/extend';\nimport app from 'flarum/app';\nimport PermissionGrid from 'flarum/components/PermissionGrid';\n\nexport default function () {\n    extend(PermissionGrid.prototype, 'moderateItems', items => {\n        items.add('flagrow-terms-see-user-policies-state', {\n            icon: 'fas fa-paperclip',\n            label: app.translator.trans('flagrow-terms.admin.permissions.see-user-policies-state'),\n            permission: 'flagrow-terms.see-user-policies-state',\n        });\n\n        items.add('flagrow-terms-postpone-policies-accept', {\n            icon: 'fas fa-paperclip',\n            label: app.translator.trans('flagrow-terms.admin.permissions.postpone-policies-accept'),\n            permission: 'flagrow-terms.postpone-policies-accept',\n        });\n\n        items.add('flagrow-terms-export-policies', {\n            icon: 'fas fa-paperclip',\n            label: app.translator.trans('flagrow-terms.admin.permissions.export-policies'),\n            permission: 'flagrow-terms.export-policies',\n        });\n    });\n}\n","import app from 'flarum/app';\nimport icon from 'flarum/helpers/icon';\nimport Component from 'flarum/Component';\nimport Button from 'flarum/components/Button';\n\nexport default class PolicyEdit extends Component {\n    init() {\n        this.policy = this.props.policy;\n        this.dirty = false;\n        this.processing = false;\n        this.toggleFields = false;\n\n        if (this.policy === null) {\n            this.initNewField();\n        }\n    }\n\n    initNewField() {\n        this.policy = app.store.createRecord('flagrow-terms-policies', {\n            attributes: {\n                name: '',\n                url: '',\n                update_message: '',\n                terms_updated_at: '',\n            },\n        });\n    }\n\n    boxTitle() {\n        if (this.policy.exists) {\n            return this.policy.name();\n        }\n\n        return app.translator.trans('flagrow-terms.admin.buttons.new-policy');\n    }\n\n    view() {\n        return m('.Flagrow-Terms-Policiy-Box', [\n            (this.policy.exists ? m('span.fas.fa-arrows-alt.Flagrow-Terms-Policiy-Box--handle.js-policy-handle') : null),\n            m('.Button.Button--block.Flagrow-Terms-Policiy-Header', {\n                onclick: () => {\n                    this.toggleFields = !this.toggleFields;\n                },\n            }, [\n                m('.Flagrow-Terms-Policiy-Header-Title', this.boxTitle()),\n                m('div', [\n                    (this.policy.exists ? [\n                        app.translator.trans('flagrow-terms.admin.buttons.edit-policy'),\n                        ' ',\n                    ] : null),\n                    icon(this.toggleFields ? 'fas fa-chevron-up' : 'fas fa-chevron-down'),\n                ]),\n            ]),\n            (this.toggleFields ? this.viewFields() : null),\n        ]);\n    }\n\n    viewFields() {\n        return m('form.Flagrow-Terms-Policiy-Body', [\n            m('.Form-group', [\n                m('label', app.translator.trans('flagrow-terms.admin.policies.name')),\n                m('input.FormControl', {\n                    type: 'text',\n                    value: this.policy.name(),\n                    oninput: m.withAttr('value', this.updateAttribute.bind(this, 'name')),\n                }),\n                m('.helpText', app.translator.trans('flagrow-terms.admin.policies.name-help')),\n            ]),\n            m('.Form-group', [\n                m('label', app.translator.trans('flagrow-terms.admin.policies.url')),\n                m('input.FormControl', {\n                    type: 'url',\n                    value: this.policy.url(),\n                    oninput: m.withAttr('value', this.updateAttribute.bind(this, 'url')),\n                }),\n                m('.helpText', app.translator.trans('flagrow-terms.admin.policies.url-help')),\n            ]),\n            m('.Form-group', [\n                m('label', app.translator.trans('flagrow-terms.admin.policies.update-message')),\n                m('textarea.FormControl', {\n                    value: this.policy.update_message(),\n                    oninput: m.withAttr('value', this.updateAttribute.bind(this, 'update_message')),\n                }),\n                m('.helpText', app.translator.trans('flagrow-terms.admin.policies.update-message-help')),\n            ]),\n            m('.Form-group', [\n                m('label', app.translator.trans('flagrow-terms.admin.policies.terms-updated-at')),\n                m('.Flagrow-Terms-Input-Group', [\n                    m('input.FormControl', {\n                        type: 'text',\n                        value: this.policy.terms_updated_at(),\n                        oninput: m.withAttr('value', this.updateAttribute.bind(this, 'terms_updated_at')),\n                        placeholder: app.translator.trans('flagrow-terms.admin.policies.terms-updated-at-placeholder'),\n                    }),\n                    Button.component({\n                        className: 'Button Button--primary',\n                        onclick: () => {\n                            this.updateAttribute('terms_updated_at', moment().milliseconds(0).toISOString());\n                        },\n                        children: app.translator.trans('flagrow-terms.admin.buttons.set-to-now'),\n                    }),\n                ]),\n                m('.helpText', app.translator.trans('flagrow-terms.admin.policies.terms-updated-at-help')),\n            ]),\n            (this.policy.exists ? m('.Form-group', [\n                m('label', app.translator.trans('flagrow-terms.admin.policies.export-url')),\n                m('.ButtonGroup', ['json', 'csv'].map(format => m('a.Button.Flagrow-Terms-Export-Button', {\n                    href: app.forum.attribute('apiUrl') + '/flagrow/terms/policies/' + this.policy.id() + '/export.' + format,\n                    target: '_blank',\n                }, format.toUpperCase()))),\n                m('.helpText', app.translator.trans('flagrow-terms.admin.policies.export-url-help', {\n                    a: m('a', {\n                        href: 'https://github.com/flagrow/terms/wiki/Export-url',\n                        target: '_blank',\n                    }),\n                })),\n            ]) : null),\n            m('.ButtonGroup', [\n                Button.component({\n                    type: 'submit',\n                    className: 'Button Button--primary',\n                    children: app.translator.trans('flagrow-terms.admin.buttons.' + (this.policy.exists ? 'save' : 'add') + '-policy'),\n                    loading: this.processing,\n                    disabled: !this.readyToSave(),\n                    onclick: this.savePolicy.bind(this),\n                }),\n                (this.policy.exists ? Button.component({\n                    type: 'submit',\n                    className: 'Button Button--danger',\n                    children: app.translator.trans('flagrow-terms.admin.buttons.delete-policy'),\n                    loading: this.processing,\n                    onclick: this.deletePolicy.bind(this),\n                }) : ''),\n            ]),\n        ]);\n    }\n\n    updateAttribute(attribute, value) {\n        this.policy.pushAttributes({\n            [attribute]: value,\n        });\n\n        this.dirty = true;\n    }\n\n    readyToSave() {\n        return this.dirty;\n    }\n\n    savePolicy() {\n        this.processing = true;\n\n        const createNewRecord = !this.policy.exists;\n\n        this.policy.save(this.policy.data.attributes).then(() => {\n            if (createNewRecord) {\n                this.initNewField();\n                this.toggleFields = false;\n            }\n\n            this.processing = false;\n            this.dirty = false;\n\n            m.redraw();\n        }).catch(err => {\n            this.processing = false;\n\n            throw err;\n        });\n    }\n\n    deletePolicy() {\n        if (!confirm(app.translator.trans('flagrow-terms.admin.messages.delete-policy-confirmation', {\n                name: this.policy.name(),\n            }).join(''))) {\n            return;\n        }\n\n        this.processing = true;\n\n        this.policy.delete().then(() => {\n            this.processing = false;\n\n            m.redraw();\n        }).catch(err => {\n            this.processing = false;\n\n            throw err;\n        });\n    }\n}\n","import 'html5sortable';\n\nimport app from 'flarum/app';\nimport Component from 'flarum/Component';\nimport PolicyEdit from './PolicyEdit';\nimport sortByAttribute from '../../common/helpers/sortByAttribute';\n\nexport default class PolicyList extends Component {\n    init() {\n        app.request({\n            method: 'GET',\n            url: app.forum.attribute('apiUrl') + '/flagrow/terms/policies',\n        }).then(result => {\n            app.store.pushPayload(result);\n\n            m.redraw();\n        });\n    }\n\n    config() {\n        this.$('.js-policies-container')\n            .sortable({\n                handle: '.js-policy-handle',\n            })\n            .on('sortupdate', () => {\n                const sorting = this.$('.js-policy-data')\n                    .map(function () {\n                        return $(this).data('id');\n                    })\n                    .get();\n\n                this.updateSort(sorting);\n            });\n    }\n\n    view() {\n        const policies = app.store.all('flagrow-terms-policies');\n\n        let fieldsList = [];\n\n        sortByAttribute(policies)\n            .forEach(policy => {\n                // Build array of fields to show.\n                fieldsList.push(m('.js-policy-data', {\n                    key: policy.id(),\n                    'data-id': policy.id(),\n                }, PolicyEdit.component({\n                    policy,\n                })));\n            });\n\n        return m('div', [\n            m('h2', app.translator.trans('flagrow-terms.admin.titles.policies')),\n            m('.Flagrow-Terms-Policies-Container', [\n                m('.js-policies-container', fieldsList),\n                PolicyEdit.component({\n                    key: 'new',\n                    policy: null,\n                }),\n            ]),\n        ]);\n    }\n\n    updateSort(sorting) {\n        app.request({\n            method: 'POST',\n            url: app.forum.attribute('apiUrl') + '/flagrow/terms/policies/order',\n            data: {\n                sort: sorting,\n            },\n        }).then(result => {\n            // Update sort attributes\n            app.store.pushPayload(result);\n\n            m.redraw();\n        });\n    }\n}\n","import app from 'flarum/app';\nimport SettingsModal from 'flarum/components/SettingsModal';\nimport Switch from 'flarum/components/Switch';\nimport PolicyList from './PolicyList';\n\nconst settingsPrefix = 'flagrow-terms.';\nconst translationPrefix = 'flagrow-terms.admin.settings.';\n\nexport default class TermsSettingsModal extends SettingsModal {\n    title() {\n        return app.translator.trans(translationPrefix + 'title');\n    }\n\n    form() {\n        return [\n            m('.Form-group', [\n                m('label', app.translator.trans(translationPrefix + 'field.signup-legal-text')),\n                m('textarea.FormControl', {\n                    bidi: this.setting(settingsPrefix + 'signup-legal-text'),\n                }),\n            ]),\n            m('.Form-group', [\n                m('label', Switch.component({\n                    state: this.setting(settingsPrefix + 'hide-updated-at')() > 0,\n                    onchange: this.setting(settingsPrefix + 'hide-updated-at'),\n                    children: app.translator.trans(translationPrefix + 'field.hide-updated-at'),\n                })),\n            ]),\n            m('.Form-group', [\n                m('label', app.translator.trans(translationPrefix + 'field.date-format')),\n                m('input[type=text].FormControl', {\n                    bidi: this.setting(settingsPrefix + 'date-format'),\n                    placeholder: 'YYYY-MM-DD',\n                }),\n                m('.helpText', app.translator.trans(translationPrefix + 'field.date-format-help', {\n                    a: m('a', {\n                        href: 'https://momentjs.com/docs/#/displaying/format/',\n                        target: '_blank',\n                    }),\n                })),\n            ]),\n            PolicyList.component(),\n        ];\n    }\n}\n","import app from 'flarum/app';\nimport Policy from '../common/models/Policy';\nimport TermsSettingsModal from './components/TermsSettingsModal';\nimport addPermissions from './addPermissions';\n\napp.initializers.add('flagrow-terms', app => {\n    app.store.models['flagrow-terms-policies'] = Policy;\n\n    app.extensionSettings['flagrow-terms'] = () => app.modal.show(new TermsSettingsModal());\n\n    addPermissions();\n});\n","export default function (items, attr = 'sort') {\n    return items.sort(\n        (a, b) => a[attr]() - b[attr]()\n    );\n}\n","import Model from 'flarum/Model';\nimport mixin from 'flarum/utils/mixin';\nimport computed from 'flarum/utils/computed';\n\nexport default class Policy extends mixin(Model, {\n    sort: Model.attribute('sort'),\n    name: Model.attribute('name'),\n    url: Model.attribute('url'),\n    update_message: Model.attribute('update_message'),\n    terms_updated_at: Model.attribute('terms_updated_at'),\n    form_key: computed('id', id => 'flagrow_terms_policy_' + id),\n}) {\n    /**\n     * @inheritDoc\n     */\n    apiEndpoint() {\n        return '/flagrow/terms/policies' + (this.exists ? '/' + this.data.id : '');\n    }\n}\n","module.exports = flarum.core.compat['Component'];","module.exports = flarum.core.compat['Model'];","module.exports = flarum.core.compat['app'];","module.exports = flarum.core.compat['components/Button'];","module.exports = flarum.core.compat['components/PermissionGrid'];","module.exports = flarum.core.compat['components/SettingsModal'];","module.exports = flarum.core.compat['components/Switch'];","module.exports = flarum.core.compat['extend'];","module.exports = flarum.core.compat['helpers/icon'];","module.exports = flarum.core.compat['utils/computed'];","module.exports = flarum.core.compat['utils/mixin'];","module.exports = jQuery;"],"sourceRoot":""}